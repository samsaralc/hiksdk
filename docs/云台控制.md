5.6 云台控制
云台控制操作
5.6.1 云台控制操作（需先启动图像预览）NET_DVR_PTZControl
函 数： BOOL NET_DVR_PTZControl(LONG lRealHandle,DWORD dwPTZCommand,DWORD dwStop)
参 数： [in]lRealHandle
[in]dwPTZCommand
[in]dwStop
NET_DVR_RealPlay_V40 的返回值
云台控制命令，详见表 5.10
云台停止动作或开始动作：0- 开始，1- 停止
返回值： TRUE 表示成功，FALSE 表示失败。接口返回失败请调用 NET_DVR_GetLastError 获取错误码，通
过错误码判断出错原因。
说 明： CVR 设备通道模式下支持，流 ID 模式时不支持。
对云台实施的每一个动作都需要调用该接口两次，分别是开始和停止控制，由接口中的最后一
个参数（dwStop）决定。在调用此接口之前需要先开启预览。与设备之间的云台各项操作的命
令都对应于设备与云台之间的控制码，设备会根据目前设置的解码器种类和解码器地址向云台
发送控制码。如果目前设备上设置的解码器与云台设备的不匹配，需要重新配置设备的解码器。
如果云台设备所需的解码器设备不支持，则无法用该接口控制。
云台默认以最大速度动作。
表 5.10 云台控制命令
dwPTZCommand 宏定义 宏定义值 含义
LIGHT_PWRON 2 接通灯光电源
WIPER_PWRON 3 接通雨刷开关
FAN_PWRON 4 接通风扇开关
HEATER_PWRON 5 接通加热器开关
AUX_PWRON1 6 接通辅助设备开关
AUX_PWRON2 7 接通辅助设备开关
ZOOM_IN 11 焦距变大(倍率变大)
67
设备网络 SDK 编程指南
ZOOM_OUT 12 焦距变小(倍率变小)
FOCUS_NEAR 13 焦点前调
FOCUS_FAR 14 焦点后调
IRIS_OPEN 15 光圈扩大
IRIS_CLOSE 16 光圈缩小
TILT_UP 21 云台上仰
TILT_DOWN 22 云台下俯
PAN_LEFT 23 云台左转
PAN_RIGHT 24 云台右转
UP_LEFT 25 云台上仰和左转
UP_RIGHT 26 云台上仰和右转
DOWN_LEFT 27 云台下俯和左转
DOWN_RIGHT 28 云台下俯和右转
PAN_AUTO 29 云台左右自动扫描
返回目录
5.6.2 云台控制操作（不用启动图像预览）NET_DVR_PTZControl_Other
函 数： BOOL NET_DVR_PTZControl_Other(LONG lUserID, LONG lChannel, DWORD dwPTZCommand,
DWORD dwStop)
参 数： [in]lUserID
[in]lChannel
[in]dwPTZCommand
[in]dwStop
NET_DVR_Login_V40 的返回值
通道号
云台控制命令，详见表 5.10
云台停止动作或开始动作：0- 开始；1- 停止
返回值： TRUE 表示成功，FALSE 表示失败。接口返回失败请调用 NET_DVR_GetLastError 获取错误码，通
过错误码判断出错原因。
说 明： CVR 设备通道模式下支持，流 ID 模式时不支持。
对云台实施的每一个动作都需要调用该接口两次，分别是开始和停止控制，由接口中的最后一
个参数（dwStop）决定。在调用此接口之前需要先注册设备。与设备之间的云台各项操作的命
令都对应于设备与云台之间的控制码，设备会根据目前设置的解码器种类和解码器地址向云台
发送控制码。如果目前设备上设置的解码器与云台设备的不匹配，需要重新配置设备的解码器。
如果云台设备所需的解码器设备不支持，则无法用该接口控制。
云台默认以最大速度动作。
 返回目录
68
设备网络 SDK 编程指南
5.6.3 带速度的云台控制操作（需先启动图像预览）
NET_DVR_PTZControlWithSpeed
函 数： BOOL NET_DVR_PTZControlWithSpeed(LONG lRealHandle, DWORD dwPTZCommand, DWORD
dwStop, DWORD dwSpeed)
参 数： [in]lRealHandle
[in] dwPTZCommand
[in]dwStop
[in]dwSpeed
NET_DVR_RealPlay_V40 的返回值
云台控制命令，详见表 5.10
云台停止动作或开始动作：0- 开始；1- 停止
云台控制的速度，用户按不同解码器的速度控制值设置。取值范
围[1,7]
返回值： TRUE 表示成功，FALSE 表示失败。接口返回失败请调用 NET_DVR_GetLastError 获取错误码，通
过错误码判断出错原因。
说 明： CVR 设备通道模式下支持，流 ID 模式时不支持。
对云台实施的每一个动作都需要调用该接口两次，分别是开始和停止控制，由接口中的最后一
个参数（dwStop）决定。在调用此接口之前需要先开启预览。与设备之间的云台各项操作的命
令都对应于设备与云台之间的控制码，设备会根据目前设置的解码器种类和解码器地址向云台
发送控制码。如果目前设备上设置的解码器与云台设备的不匹配，需要重新配置设备的解码器。
如果云台设备所需的解码器设备不支持，则无法用该接口控制。
 返回目录
5.6.4 带速度的云台控制操作（不用启动图像预览）
NET_DVR_PTZControlWithSpeed_Other
函 数： BOOL NET_DVR_PTZControlWithSpeed(LONG lUserID, LONG lChannel, DWORD dwPTZCommand,
DWORD dwStop, DWORD dwSpeed)
参 数： [in]lUserID
[in]lChannel
[in]dwPTZCommand
[in]dwStop
[in]dwSpeed
NET_DVR_Login_V40 的返回值
通道号
云台控制命令，详见表 5.10
云台停止动作或开始动作：0- 开始；1- 停止
云台控制的速度，用户按不同解码器的速度控制值设置。取值范
围[1,7]
返回值： TRUE 表示成功，FALSE 表示失败。接口返回失败请调用 NET_DVR_GetLastError 获取错误码，通
过错误码判断出错原因。
说 明： CVR 设备通道模式下支持，流 ID 模式时不支持。
对云台实施的每一个动作都需要调用该接口两次，分别是开始和停止控制，由接口中的最后一
个参数（dwStop）决定。在调用此接口之前不需要先开启预览，登录设备后即可实现控制。与
设备之间的云台各项操作的命令都对应于设备与云台之间的控制码，设备会根据目前设置的解
码器种类和解码器地址向云台发送控制码。如果目前设备上设置的解码器与云台设备的不匹配，
需要重新配置设备的解码器。如果云台设备所需的解码器设备不支持，则无法用该接口控制。
